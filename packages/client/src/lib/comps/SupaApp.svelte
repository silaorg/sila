<script lang="ts">
  import { type ClientStateConfig } from "@supa/client";
  import { clientState } from "../state/clientState.svelte";
  // ./lib/compiled-style.css should be generated by npx tailwindcss at some point in the
  // build process, so if you don't see this file, make sure
  // you've run "npm run dev" or "npm run build" in the repository's root.
  import "@supa/client/compiled-style.css";

  let { config }: { config: ClientStateConfig | null } = $props();

  $effect(() => {
    if (config) {
      clientState.init(config);
    }
  });

  onDestroy(() => {
    clientState.cleanup();
  });

  console.log(
    "ðŸ‘‹ Hey, if you see any bugs - please report them to https://github.com/supaorg/supa/issues",
  );
  console.log(
    "Reach out to the author of the project with any questions - Dmitry at d@dkury.com",
  );

  import SpaceEntry from "./SpaceEntry.svelte";
  import { onDestroy } from "svelte";
</script>

{#if config}
  <SpaceEntry />
{:else}
  Loading...
{/if}
